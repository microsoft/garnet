<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dev/custom-commands" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Garnet Custom Commands | Garnet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/garnet/docs/dev/custom-commands"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Garnet Custom Commands | Garnet"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/garnet/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/garnet/docs/dev/custom-commands"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/dev/custom-commands" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/dev/custom-commands" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Custom Commands","item":"https://microsoft.github.io/garnet/docs/dev/custom-commands"}]}</script><link rel="alternate" type="application/rss+xml" href="/garnet/blog/rss.xml" title="Garnet RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/garnet/blog/atom.xml" title="Garnet Atom Feed">




<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/loh6v65ww5",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/garnet/assets/css/styles.3719bd29.css">
<script src="/garnet/assets/js/runtime~main.499fd43c.js" defer="defer"></script>
<script src="/garnet/assets/js/main.f2f3fb26.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/garnet/img/garnet-logo-diamond.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/garnet/"><div class="navbar__logo"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Garnet</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/garnet/docs">Docs</a><a class="navbar__item navbar__link" href="/garnet/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/garnet/docs"><span title="Welcome" class="categoryLinkLabel_W154">Welcome</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs"><span title="Intro" class="linkLabel_WmDU">Intro</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/news"><span title="News" class="linkLabel_WmDU">News</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/features"><span title="Features" class="linkLabel_WmDU">Features</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/releases"><span title="Releases" class="linkLabel_WmDU">Releases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/compatibility"><span title="Compatibility" class="linkLabel_WmDU">Compatibility</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/roadmap"><span title="Roadmap" class="linkLabel_WmDU">Roadmap</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/about-us"><span title="About Us" class="linkLabel_WmDU">About Us</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/benchmarking/overview"><span title="Benchmarking" class="categoryLinkLabel_W154">Benchmarking</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/commands/overview"><span title="Commands" class="categoryLinkLabel_W154">Commands</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/extensions/overview"><span title="Server Extensions" class="categoryLinkLabel_W154">Server Extensions</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/cluster/overview"><span title="Cluster Mode" class="categoryLinkLabel_W154">Cluster Mode</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/garnet/docs/dev/onboarding"><span title="Developer Guide" class="categoryLinkLabel_W154">Developer Guide</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/onboarding"><span title="Onboarding" class="linkLabel_WmDU">Onboarding</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/code-structure"><span title="Code Structure" class="linkLabel_WmDU">Code Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/configuration"><span title="Configuration" class="linkLabel_WmDU">Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/network"><span title="Network Layer" class="linkLabel_WmDU">Network Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/processing"><span title="Processing Layer" class="linkLabel_WmDU">Processing Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/garnet-api"><span title="Garnet API" class="linkLabel_WmDU">Garnet API</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/garnet/docs/dev/tsavorite/intro"><span title="Tsavorite - Storage Layer" class="categoryLinkLabel_W154">Tsavorite - Storage Layer</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/transactions"><span title="Transactions" class="linkLabel_WmDU">Transactions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/garnet/docs/dev/custom-commands"><span title="Custom Commands" class="linkLabel_WmDU">Custom Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/multi-db"><span title="Logical Databases" class="linkLabel_WmDU">Logical Databases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/collection-broker"><span title="Collection Broker" class="linkLabel_WmDU">Collection Broker</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/garnet/docs/dev/cluster/overview"><span title="Cluster" class="categoryLinkLabel_W154">Cluster</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/contributing"><span title="Contributing" class="linkLabel_WmDU">Contributing</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/azure/overview"><span title="Managed Offering (Azure)" class="categoryLinkLabel_W154">Managed Offering (Azure)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/research/papers"><span title="Research" class="categoryLinkLabel_W154">Research</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/microsoft/garnet/releases" target="_blank" rel="noopener noreferrer" class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false"><span title="Other Links" class="categoryLinkLabel_W154">Other Links</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/garnet/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Custom Commands</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Garnet Custom Commands</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>Garnet supports registering custom commands and transactions implemented in C#, both programmatically on the server-side and through running dedicated REGISTERCS command in the client-side.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="supported-custom-command-types">Supported Custom Command Types<a href="#supported-custom-command-types" class="hash-link" aria-label="Direct link to Supported Custom Command Types" title="Direct link to Supported Custom Command Types" translate="no">​</a></h2>
<ol>
<li class=""><strong>Custom Raw String Commands</strong>: To implement a custom raw string command, implement a class that inherits from the <code>CustomRawStringFunctions</code> base class (See example: <code>main\GarnetServer\Extensions\DeleteIfMatch.cs</code>)</li>
<li class=""><strong>Custom Object Commands</strong>: To implement a custom object command, implement your custom object class that inherits from <code>GarnetObjectBase</code> base class, as well as a factory that creates your object type that inherits from the <code>CustomObjectFactory</code> base class (See example: <code>main\GarnetServer\Extensions\MyDictObject.cs</code>)</li>
<li class=""><strong>Custom Transaction</strong>: To implement a custom transaction, implement a class that inherits from the <code>CustomTransactionProcedure</code> base class (See example: <code>main\GarnetServer\Extensions\ReadWriteTxn.cs</code>)</li>
<li class=""><strong>Custom Procedure</strong>: To implement a non-transactional procedure, implement a class that inherits from the <code>CustomProcedure </code> base class (See example: <code>main\GarnetServer\Extensions\Sum.cs</code>)</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="server-side-command-registration">Server-Side Command Registration<a href="#server-side-command-registration" class="hash-link" aria-label="Direct link to Server-Side Command Registration" title="Direct link to Server-Side Command Registration" translate="no">​</a></h2>
<p>To register a new custom command from the server-side, use the GarnetServer instance&#x27;s RegisterApi, and call either <code>NewCommand</code> or <code>NewTransactionProc</code> according to the custom command type that you are trying to register.</p>
<ol>
<li class=""><strong>Custom Raw String Commands</strong>: To register a new command using a concrete class implementing <code>CustomRawStringFunctions</code>, call <code>RegisterApi.NewCommand(string name, int numParams, CommandType type, CustomRawStringFunctions customFunctions, RespCommandsInfo commandInfo = null, long expirationTicks = 0)</code>, where <code>customFunctions</code> is an instance of the new concrete class.</li>
<li class=""><strong>Custom Object Commands</strong>: To register a new command using a concrete class implementing <code>CustomObjectFactory</code>, call <code>RegisterApi.NewCommand(string name, int numParams, CommandType commandType, CustomObjectFactory factory, RespCommandsInfo commandInfo = null)</code>, where <code>factory</code> is an instance of the new concrete class.</li>
<li class=""><strong>Custom Transaction</strong>: To register a new transaction using a concrete class implementing <code>CustomTransactionProcedure</code>, call <code>NewTransactionProc(string name, int numParams, Func&lt;CustomTransactionProcedure&gt; proc, RespCommandsInfo commandInfo = null)</code>, where <code>proc</code> is a <code>Func</code> that returns an instance of the new concrete class.</li>
<li class=""><strong>Custom Procedure</strong>: To register a new procedure using a concrete class implementing <code>CustomProcedure</code>, call <code>RegisterApi.NewProcedure(string name, CustomProcedure customProcedure, RespCommandsInfo commandInfo = null, RespCommandDocs commandDocs = null)</code>, where <code>customProcedure</code> is an instance of the procedure concrete class.</li>
</ol>
<p>Note that each call to the RegisterApi has an optional <code>RespCommandsInfo commandInfo</code> parameter. This parameter allows you to supply Garnet with metadata regarding the custom command that will be visible to the client when running the <a class="" href="/garnet/docs/commands/server#command"><code>COMMAND</code></a> or <a class="" href="/garnet/docs/commands/server#command-info"><code>COMMAND INFO</code></a> commands.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="client-side-command-registration">Client-Side Command Registration<a href="#client-side-command-registration" class="hash-link" aria-label="Direct link to Client-Side Command Registration" title="Direct link to Client-Side Command Registration" translate="no">​</a></h2>
<p>To register a new custom command from the client-side, use the dedicated REGISTERCS command in the client app (<strong>note:</strong> this is an <strong>admin command</strong>). <br>
The REGISTERCS command takes assemblies that exist on the server and contain implementations for either of the supported custom command classes, and registers the custom commands on the server according to parameters given by the client <br>
The REGISTERCS command supports registering multiple commands and / or transactions from multiple files and / or directories containing C# binary files (*.dll / *.exe).<br></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="enabling-client-side-command-registration">Enabling Client-Side Command Registration<a href="#enabling-client-side-command-registration" class="hash-link" aria-label="Direct link to Enabling Client-Side Command Registration" title="Direct link to Enabling Client-Side Command Registration" translate="no">​</a></h3>
<p>To enable registering client-side custom commands, you must specify a list of allowed paths from which assemblies can potentially be loaded, and enable module commands.
This is done by setting the configuration parameters <code>EnableModuleCommand</code> and <code>ExtensionBinPaths</code>.
Example (in garnet.config):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;EnableModuleCommand&quot;: &quot;local&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;ExtensionBinPaths&quot;: &quot;.\first\path\,..\..\second\path\&quot;</span><br></span></code></pre></div></div>
<p><strong>Note #1</strong>: Assemblies can be loaded from any directory level under these specified paths<br>
<strong>Note #2</strong>: By default, Garnet only allows loading of digitally signed assemblies. To remove that requirement (not recommended), set the configuration parameter <code>ExtensionAllowOnlySignedAssemblies</code> to <code>false</code>.<br></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="registercs-command">REGISTERCS Command<a href="#registercs-command" class="hash-link" aria-label="Direct link to REGISTERCS Command" title="Direct link to REGISTERCS Command" translate="no">​</a></h3>
<p>To run the REGISTERCS command, run the REGISTERCS keyword followed by one or more new command subcommands, followed by the optional INFO keyword which is followed by a path pointing to a JSON file containing a serialized array of <code>RespCommandsInfo</code> objects, containing command metadata (*.json), followed by the SRC keyword, which is followed by one or more paths to C# binary files or directories containing C# binary files (*.dll / *.exe).<br></p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="full-command-syntax">Full command syntax:<a href="#full-command-syntax" class="hash-link" aria-label="Direct link to Full command syntax:" title="Direct link to Full command syntax:" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REGISTERCS cmdType name numParams className [expTicks] [cmdType name numParams className [expTicks] ...] [INFO path] SRC path [path ...]</span><br></span></code></pre></div></div>
<p>Each new command that you intend to register, is specified by either of the command type keywords, followed by its parameters.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="new-command-sub-command-syntax">New command sub-command syntax:<a href="#new-command-sub-command-syntax" class="hash-link" aria-label="Direct link to New command sub-command syntax:" title="Direct link to New command sub-command syntax:" translate="no">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cmdType name numParams cmdType className [expTicks]</span><br></span></code></pre></div></div>
<p><strong>Command Type:</strong><br>
The following keywords are legal values for <code>cmdType</code>:</p>
<ul>
<li class=""><strong>READ</strong> (New read command)</li>
<li class=""><strong>READMODIFYWRITE</strong> or <strong>RMW</strong> (New Read-modify-write command)</li>
<li class=""><strong>TRANSACTION</strong> or <strong>TXN</strong> (New transaction)</li>
</ul>
<p><strong>Parameters:</strong></p>
<ul>
<li class=""><strong>name</strong>: Name of the new command</li>
<li class=""><strong>numParams</strong>: Number of parameters taken by the new command</li>
<li class=""><strong>className</strong>: Class name of concrete class implementing <code>CustomRawStringFunctions</code> or <code>CustomObjectFactory</code> for new <strong>READ</strong> / <strong>RMW</strong> commands, or <code>CustomTransactionProcedure</code> for new <strong>TXN</strong> commands (must exist in assemblies referenced in paths list)<br></li>
<li class=""><strong>expTicks</strong>: Command expiry in ticks (only relevant for custom raw string commands, ignored otherwise)<!-- -->
<ul>
<li class=""><strong>-1</strong>: remove existing expiration metadata;</li>
<li class=""><strong>0</strong>: retain whatever it is currently (or no expiration if this is a new entry) - this is the default;</li>
<li class=""><strong>&gt;0</strong>: =&gt; set expiration to given value.</li>
</ul>
</li>
</ul>
<p><strong>Note:</strong> If the server could not register one or more of the commands / transactions specified, or if it could not load or enumerate one or more of the files or directories specified in the REGISTERCS command, no action will be taken (i.e. no command will be registered), and the command execution will fail with an appropriate error message.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resp-reply">RESP Reply<a href="#resp-reply" class="hash-link" aria-label="Direct link to RESP Reply" title="Direct link to RESP Reply" translate="no">​</a></h3>
<p>Returns +OK on success, otherwise --ERR message if any</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="registercs-errors">REGISTERCS Errors<a href="#registercs-errors" class="hash-link" aria-label="Direct link to REGISTERCS Errors" title="Direct link to REGISTERCS Errors" translate="no">​</a></h3>
<ul>
<li class=""><strong>ERR malformed REGISTERCS command</strong> - Error in the parsing of the REGISTERCS command</li>
<li class=""><strong>ERR unable to access command info file.</strong> - Error accessing command info file specified after the INFO keyword</li>
<li class=""><strong>ERR command info file is not contained in allowed paths.</strong> - Command info file specific is not contained in the allowed path list according to the server configuration (<code>ExtensionBinPaths</code> in garnet.config)</li>
<li class=""><strong>ERR malformed command info JSON.</strong> - Error deserializing command info JSON file</li>
<li class=""><strong>ERR unable to access one or more binary files</strong> - Error accessing or enumerating one or more files or folders specified in path list</li>
<li class=""><strong>ERR one or more binary file are not contained in allowed paths</strong> - One or more of the binary paths specified are not contained in the allowed path list according to the server configuration (<code>ExtensionBinPaths</code> in garnet.config)</li>
<li class=""><strong>ERR unable to load one or more assemblies</strong> - Error loading one or more assemblies from binary files retrieved from path list (assembly load is attempted on all *.dll / *.exe files specified or found in directories specified)</li>
<li class=""><strong>ERR one or more assemblies loaded is not digitally signed</strong> - One or more of the loaded assemblies are not digitally signed. This error will occur when trying to load unsigned assemblies when the server configuration is set to allow loading of only digitally signed assemblies (<code>ExtensionAllowOnlySignedAssemblies</code> in garnet.conf)</li>
<li class=""><strong>ERR unable to instantiate one or more classes from given assemblies</strong> - Error creating an instance of one or more classes specified using loaded assemblies (note that each class should have an empty constructor)</li>
<li class=""><strong>ERR unable to register one or more unsupported classes</strong> - Error registering one or more unsupported classes, i.e. one or more of the classes were not implementing one of the expected base classes</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/microsoft/garnet/tree/main/website/docs/dev/custom-commands.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/garnet/docs/dev/transactions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Transactions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/garnet/docs/dev/multi-db"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Logical Databases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#supported-custom-command-types" class="table-of-contents__link toc-highlight">Supported Custom Command Types</a></li><li><a href="#server-side-command-registration" class="table-of-contents__link toc-highlight">Server-Side Command Registration</a></li><li><a href="#client-side-command-registration" class="table-of-contents__link toc-highlight">Client-Side Command Registration</a><ul><li><a href="#enabling-client-side-command-registration" class="table-of-contents__link toc-highlight">Enabling Client-Side Command Registration</a></li><li><a href="#registercs-command" class="table-of-contents__link toc-highlight">REGISTERCS Command</a></li><li><a href="#resp-reply" class="table-of-contents__link toc-highlight">RESP Reply</a></li><li><a href="#registercs-errors" class="table-of-contents__link toc-highlight">REGISTERCS Errors</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/docs/getting-started">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aka.ms/garnet-discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/msrgarnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p class="text-center">
          <a href="https://go.microsoft.com/fwlink/?LinkId=521839" style="color: white;">Privacy &amp; Cookies</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=2259814" style="color: white;">Consumer Health Privacy</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=206977" style="color: white;">Terms of Use</a> |
          <a href="https://www.microsoft.com/trademarks" style="color: white;">Trademarks</a> | © 2025
          </p></div></div></div></footer></div>
</body>
</html>