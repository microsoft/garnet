<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-dev/configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Garnet Configuration | Garnet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/garnet/docs/dev/configuration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Garnet Configuration | Garnet"><meta data-rh="true" name="description" content="Code Overview"><meta data-rh="true" property="og:description" content="Code Overview"><link data-rh="true" rel="icon" href="/garnet/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/garnet/docs/dev/configuration"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/dev/configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/dev/configuration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Configuration","item":"https://microsoft.github.io/garnet/docs/dev/configuration"}]}</script><link rel="alternate" type="application/rss+xml" href="/garnet/blog/rss.xml" title="Garnet RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/garnet/blog/atom.xml" title="Garnet Atom Feed">




<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/loh6v65ww5",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/garnet/assets/css/styles.a0a59612.css">
<script src="/garnet/assets/js/runtime~main.ec929e65.js" defer="defer"></script>
<script src="/garnet/assets/js/main.e77c437c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/garnet/img/garnet-logo-diamond.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/garnet/"><div class="navbar__logo"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Garnet</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/garnet/docs">Docs</a><a class="navbar__item navbar__link" href="/garnet/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/garnet/docs"><span title="Welcome" class="categoryLinkLabel_W154">Welcome</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs"><span title="Intro" class="linkLabel_WmDU">Intro</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/news"><span title="News" class="linkLabel_WmDU">News</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/features"><span title="Features" class="linkLabel_WmDU">Features</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/releases"><span title="Releases" class="linkLabel_WmDU">Releases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/compatibility"><span title="Compatibility" class="linkLabel_WmDU">Compatibility</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/roadmap"><span title="Roadmap" class="linkLabel_WmDU">Roadmap</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/faq"><span title="FAQ" class="linkLabel_WmDU">FAQ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/about-us"><span title="About Us" class="linkLabel_WmDU">About Us</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/benchmarking/overview"><span title="Benchmarking" class="categoryLinkLabel_W154">Benchmarking</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/commands/overview"><span title="Commands" class="categoryLinkLabel_W154">Commands</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/extensions/overview"><span title="Server Extensions" class="categoryLinkLabel_W154">Server Extensions</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/cluster/overview"><span title="Cluster Mode" class="categoryLinkLabel_W154">Cluster Mode</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/garnet/docs/dev/onboarding"><span title="Developer Guide" class="categoryLinkLabel_W154">Developer Guide</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/onboarding"><span title="Onboarding" class="linkLabel_WmDU">Onboarding</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/code-structure"><span title="Code Structure" class="linkLabel_WmDU">Code Structure</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/garnet/docs/dev/configuration"><span title="Configuration" class="linkLabel_WmDU">Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/network"><span title="Network Layer" class="linkLabel_WmDU">Network Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/processing"><span title="Processing Layer" class="linkLabel_WmDU">Processing Layer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/garnet-api"><span title="Garnet API" class="linkLabel_WmDU">Garnet API</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/garnet/docs/dev/tsavorite/intro"><span title="Tsavorite - Storage Layer" class="categoryLinkLabel_W154">Tsavorite - Storage Layer</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/transactions"><span title="Transactions" class="linkLabel_WmDU">Transactions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/custom-commands"><span title="Custom Commands" class="linkLabel_WmDU">Custom Commands</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/multi-db"><span title="Logical Databases" class="linkLabel_WmDU">Logical Databases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/collection-broker"><span title="Collection Broker" class="linkLabel_WmDU">Collection Broker</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/garnet/docs/dev/cluster/overview"><span title="Cluster" class="categoryLinkLabel_W154">Cluster</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/dev/contributing"><span title="Contributing" class="linkLabel_WmDU">Contributing</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/azure/overview"><span title="Managed Offering (Azure)" class="categoryLinkLabel_W154">Managed Offering (Azure)</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/research/papers"><span title="Research" class="categoryLinkLabel_W154">Research</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/microsoft/garnet/releases" target="_blank" rel="noopener noreferrer" class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false"><span title="Other Links" class="categoryLinkLabel_W154">Other Links</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/garnet/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Configuration</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Garnet Configuration</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="code-overview">Code Overview<a href="#code-overview" class="hash-link" aria-label="Direct link to Code Overview" title="Direct link to Code Overview" translate="no">​</a></h2>
<p>Every configurable Garnet setting has a matching property defined in the <strong>Options</strong> class (<code>GarnetServer\Configuration\Options.cs</code>). <br>
<!-- -->When GarnetServer.exe initializes, it creates a new Options object using the command line variables, the defaults file and a configuration file, if supplied, by calling <strong>ServerSettingsManager.TryParseCommandLineArguments()</strong>.<br>
<!-- -->It then calls the instance method <strong>GetServerOptions()</strong> which returns an instance of <strong>GarnetServerOptions</strong>, that can be then used to create a new instance of <strong>GarnetServer</strong>.</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-parsing">Options Parsing<a href="#options-parsing" class="hash-link" aria-label="Direct link to Options Parsing" title="Direct link to Options Parsing" translate="no">​</a></h2>
<p>The <strong>Options</strong> object is initialized by calling <strong>ServerSettingsManager.TryParseCommandLineArguments()</strong> with the set of inputted command line arguments.<br>
<!-- -->The initialization of the object consists of:</p>
<ol>
<li class="">Parsing the <strong>defaults configuration file</strong> into the Options object (defaults to <code>defaults.conf</code>, unless otherwise specified by the command line arguments)</li>
<li class="">Parsing the <strong>configuration file</strong> (if specified by the command line arguments) and populating the initialized object, overriding default settings.</li>
<li class="">Parsing the <strong>command line variables</strong> and populating the object again, overriding and default settings or settings provided by the configuration file.</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration-file-parsing">Configuration File Parsing<a href="#configuration-file-parsing" class="hash-link" aria-label="Direct link to Configuration File Parsing" title="Direct link to Configuration File Parsing" translate="no">​</a></h3>
<p>Parsing of the configuration files is done by calling <strong>ServerSettingsManager.TryImportServerOptions()</strong>. This method supports reading files from multiple sources (currently supported: <strong>local files</strong> &amp; remote files on <strong>Azure Storage</strong>), as well as reading multiple file formats (specified by the <strong>ConfigFileType</strong> enum).
This is done by calling the following factory methods:</p>
<ol>
<li class=""><strong>StreamProviderFactory.GetStreamProvider()</strong> - returns a <strong>StreamProviderBase</strong> for reading from the appropriate file source</li>
<li class=""><strong>ConfigProviderFactory.GetConfigProvider()</strong> - returns an <strong>IConfigProvider</strong> for reading the appropriate file format</li>
</ol>
<!-- -->
<p><strong>Note:</strong> When specifying an configuration export file path in the command line provider, the <strong>ServerSettingsManager.TryExportServerOptions()</strong> will similarly use <strong>StreamProviderFactory</strong> and <strong>ConfigProviderFactory</strong> to write the configuration file in the specified format to the specified file source.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="supported-file-formats">Supported File Formats<a href="#supported-file-formats" class="hash-link" aria-label="Direct link to Supported File Formats" title="Direct link to Supported File Formats" translate="no">​</a></h3>
<p>Currently we support 2 different configuration file formats (all supported file formats are described by the <strong>ConfigFileType</strong> enum):</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="garnetconf">GarnetConf<a href="#garnetconf" class="hash-link" aria-label="Direct link to GarnetConf" title="Direct link to GarnetConf" translate="no">​</a></h4>
<p>The <strong>GarnetConf</strong> configuration file format is the default format for Garnet configuration files.<br>
<!-- -->This format consists of a <strong>JSON-serialized</strong> Options object.<br>
<!-- -->The <strong>GarnetConfigProvider</strong> is the implementation of <strong>IConfigProvider</strong> which allows to serialize and deserialize options from or into an Options object (into or from an instance of <strong>StreamProviderBase</strong> respectively), using the <strong>Newtonsoft.Json</strong> serializer for JSON deserialization and the <strong>System.Text</strong> serializer for JSON serialization.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="redisconf">RedisConf<a href="#redisconf" class="hash-link" aria-label="Direct link to RedisConf" title="Direct link to RedisConf" translate="no">​</a></h4>
<p>The <strong>RedisConf</strong> configuration file format is the file format used to configure a Redis server (read more <a href="https://redis.io/docs/management/config/" target="_blank" rel="noopener noreferrer" class="">here</a>).<br>
<!-- -->Each Garnet-supported setting in this format has a matching property in the <strong>RedisOptions</strong> class (<code>GarnetServer\Configuration\RedisOptions.cs</code>).<br>
<!-- -->Each property is decorated with the <strong>RedisOptionAttribute</strong>, which is used to specify the key (the Redis keyword), the Garnet property name that matches this property, and optionally - the type of transformer to use when transforming the Redis property to the Garnet property.</p>
<p>The <strong>RedisConfigProvider</strong> is the implementation of <strong>IConfigProvider</strong> which allows to deserialize options into an Options object (from an instance of <strong>StreamProviderBase</strong>).It uses a custom serializer, <strong>RedisConfigSerializer</strong> (<code>GarnetServer\Configuration\RedisConfigSerializer.cs</code>) to deserialize and populate the Options object.
Deserialization may use a custom converter to convert the string value to a Redis type (all Redis types and custom converters can be found in <code>GarnetServer\Configuration\RedisTypes.cs</code> and <code>GarnetServer\Configuration\TypeConverters.cs</code>).<br>
<!-- -->Populating the Options object is done by the matching Options property from the <strong>RedisOptionAttribute</strong>, then either transforming the <strong>RedisOptions</strong> property to the destination Options property (if a custom transformer is specified in the attribute) or converting the property using a TypeConverter, if such exists. If neither a transformer nor a type converter exists, a simple cast is attempted. If all fails, the serialization will fail.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="command-line-argument-parsing">Command Line Argument Parsing<a href="#command-line-argument-parsing" class="hash-link" aria-label="Direct link to Command Line Argument Parsing" title="Direct link to Command Line Argument Parsing" translate="no">​</a></h3>
<p>Parsing of the command line arguments is done by a 3rd party library named <a href="https://github.com/commandlineparser/commandline" target="_blank" rel="noopener noreferrer" class="">CommandLineParser</a>. Each Options property is decorated by the <strong>OptionAttribute</strong>, which specifies its long name and / or short name (e.g. &quot;memory&quot; / &quot;m&quot; respectively) as well as its help text to be displayed when running <code>GarnetServer.exe -h</code> or <code>GarnetServer.exe --help</code>.<br>
<!-- -->The OptionsAttribute also supports specifying a default value, which is <strong>not used</strong> as to not create confusion with the default values specified in the defaults configuration file.</p>
<p>Command line arguments parsing is effectively done twice, we first parse the command line arguments in order to retrieve the defaults configuration file and the configuration file, if specified. We then hand the command line arguments parser an initialization function that populates an Options object as described in the <a href="#configuration-file-parsing" class="">Configuration File Parsing</a> section. The parser then proceeds to populate the initialized object with settings specified in the command line.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options-validation">Options Validation<a href="#options-validation" class="hash-link" aria-label="Direct link to Options Validation" title="Direct link to Options Validation" translate="no">​</a></h3>
<p>Once Options parsing is done, the <strong>ServerSettingsManager.TryParseCommandLineArguments()</strong> then calls the instance method <strong>Options.IsValid()</strong> to validate the final Options object.<br>
<!-- -->Each Options property may be decorated with a ValidationAttribute (all custom Garnet validation attributes can be found in <code>GarnetServer\Configuration\OptionsValidators.cs</code>), which can then be used to check each property value validity.
If any invalid property values are found, the method will return a null options object, as well as a list of the invalid property names.<br>
<!-- -->All errors returned by the validators will be written to the console.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-add-a-new-setting">How to Add a New Setting<a href="#how-to-add-a-new-setting" class="hash-link" aria-label="Direct link to How to Add a New Setting" title="Direct link to How to Add a New Setting" translate="no">​</a></h2>
<p>In order to add a new setting to Garnet, follow these steps:</p>
<ol>
<li class="">Add a new property to the Options class (<code>GarnetServer\Configuration\Options.cs</code>)</li>
<li class="">Decorate your property with the <strong>OptionAttribute</strong>, and assign it with a long name, short name or both. Also add the appropriate help text to describe the property</li>
<li class="">If your property requires validation, decorate it with a custom <strong>ValidationAttribute</strong> from <code>GarnetServer\Configuration\OptionsValidators.cs</code> (add a new one if needed)</li>
<li class="">Add your property&#x27;s default value in <code>defaults.conf</code></li>
<li class="">If the new setting is required in the core Garnet code - add a matching property to the <strong>GarnetServerOptions</strong> class, and add the property setting when constructing the <strong>GarnetServerOptions</strong> object in <strong>Options.GetServerOptions()</strong></li>
<li class="">If the setting has a matching setting in Redis and you would like to support it in a Redis-formatted configuration file:<!-- -->
<ol>
<li class="">Add the matching property to the <strong>RedisOptions</strong> class (<code>GarnetServer\Configuration\RedisOptions.cs</code>)</li>
<li class="">Decorate your property with the <strong>RedisOptionAttribute</strong>. Specify in the attribute constuctor the key (the Redis keyword), the Garnet property name that matches this property, and optionally - the type of trasformer to use when transforming the Redis property to the Garnet property. Read more about how to properly convert your property in the <a href="#redisconf" class="">RedisConf</a> section.</li>
</ol>
</li>
<li class="">Test your code by adding the new setting to a configuration file and make sure that it&#x27;s being parsed correctly. Alternatively, you can add a check for your setting in <strong>GarnetServerConfigTests</strong> (<code>Garnet.test\GarnetServerConfigTests.cs</code>).</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to-add-a-new-configuration-file-format">How to Add a New Configuration File Format<a href="#how-to-add-a-new-configuration-file-format" class="hash-link" aria-label="Direct link to How to Add a New Configuration File Format" title="Direct link to How to Add a New Configuration File Format" translate="no">​</a></h2>
<p>In order to add a new configuration file formet to Garnet, follow these steps:</p>
<ol>
<li class="">Add a new value to the <strong>ConfigFileType</strong> enum that matches the new file type</li>
<li class="">Implement a new instance of <strong>IConfigProvider</strong> for importing / exporting options from or to the new file format</li>
<li class="">Add a new case to the <strong>ConfigProviderFactory.GetConfigProvider()</strong> switch clause, and return a new instance of your <strong>IConfigProvider</strong> implementation</li>
<li class="">If needed, add a custom serializer to serialize or deserialize the new file format</li>
<li class="">Add a new test case to <strong>GarnetServerConfigTests</strong> (<code>Garnet.test\GarnetServerConfigTests.cs</code>) to check that your code imports / exports options correctly</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/microsoft/garnet/tree/main/website/docs/dev/configuration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/garnet/docs/dev/code-structure"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Code Structure</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/garnet/docs/dev/network"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Network Layer</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#code-overview" class="table-of-contents__link toc-highlight">Code Overview</a></li><li><a href="#options-parsing" class="table-of-contents__link toc-highlight">Options Parsing</a><ul><li><a href="#configuration-file-parsing" class="table-of-contents__link toc-highlight">Configuration File Parsing</a></li><li><a href="#supported-file-formats" class="table-of-contents__link toc-highlight">Supported File Formats</a></li><li><a href="#command-line-argument-parsing" class="table-of-contents__link toc-highlight">Command Line Argument Parsing</a></li><li><a href="#options-validation" class="table-of-contents__link toc-highlight">Options Validation</a></li></ul></li><li><a href="#how-to-add-a-new-setting" class="table-of-contents__link toc-highlight">How to Add a New Setting</a></li><li><a href="#how-to-add-a-new-configuration-file-format" class="table-of-contents__link toc-highlight">How to Add a New Configuration File Format</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/docs/getting-started">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aka.ms/garnet-discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/msrgarnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p class="text-center">
          <a href="https://go.microsoft.com/fwlink/?LinkId=521839" style="color: white;">Privacy &amp; Cookies</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=2259814" style="color: white;">Consumer Health Privacy</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=206977" style="color: white;">Terms of Use</a> |
          <a href="https://www.microsoft.com/trademarks" style="color: white;">Trademarks</a> | © 2025
          </p></div></div></div></footer></div>
</body>
</html>