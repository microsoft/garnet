<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-commands/garnet-specific-commands" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Garnet-specific Commands | Garnet</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/garnet/docs/commands/garnet-specific-commands"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Garnet-specific Commands | Garnet"><meta data-rh="true" name="description" content="Apart from Garnet&#x27;s server extensions, we support many API calls that are not available"><meta data-rh="true" property="og:description" content="Apart from Garnet&#x27;s server extensions, we support many API calls that are not available"><link data-rh="true" rel="icon" href="/garnet/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/garnet/docs/commands/garnet-specific-commands"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/commands/garnet-specific-commands" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/garnet/docs/commands/garnet-specific-commands" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Garnet-specific Commands","item":"https://microsoft.github.io/garnet/docs/commands/garnet-specific-commands"}]}</script><link rel="alternate" type="application/rss+xml" href="/garnet/blog/rss.xml" title="Garnet RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/garnet/blog/atom.xml" title="Garnet Atom Feed">




<script>!function(t,e,n,c,a,r,s){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(r=e.createElement(c)).async=1,r.src="https://www.clarity.ms/tag/loh6v65ww5",(s=e.getElementsByTagName(c)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><link rel="stylesheet" href="/garnet/assets/css/styles.c254282c.css">
<script src="/garnet/assets/js/runtime~main.95f3c7b4.js" defer="defer"></script>
<script src="/garnet/assets/js/main.06a356fa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/garnet/"><div class="navbar__logo"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/garnet/img/garnet-logo-diamond.png" alt="Garnet Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Garnet</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/garnet/docs">Docs</a><a class="navbar__item navbar__link" href="/garnet/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/garnet/docs">Welcome</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/news">News</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/features">Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/releases">Releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/compatibility">Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/welcome/about-us">About Us</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/getting-started">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/benchmarking/overview">Benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/garnet/docs/commands/overview">Commands</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/api-compatibility">API Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/raw-string">Raw String</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/generic">Generic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/analytics">Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/data-structures">Data Structures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/server">Server Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/client">Client Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/checkpoint">Checkpoint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/transactions">Transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/cluster">Cluster Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/acl">ACL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/scripting">Scripting and functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/garnet/docs/commands/garnet-specific-commands">Garnet-specific Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/garnet/docs/commands/json">JSON Module</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/extensions/overview">Server Extensions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/cluster/overview">Cluster Mode</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/dev/onboarding">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/garnet/docs/research/papers">Research</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://github.com/microsoft/garnet/releases" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Other Links</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/garnet/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Commands</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Garnet-specific Commands</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Garnet-specific Commands</h1></header><p>Apart from Garnet&#x27;s <a href="/garnet/docs/extensions/overview">server extensions</a>, we support many API calls that are not available
in other RESP servers. These are described below.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forcegc">FORCEGC<a href="#forcegc" class="hash-link" aria-label="Direct link to FORCEGC" title="Direct link to FORCEGC">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax">Syntax<a href="#syntax" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    FORCEGC [generation]</span><br></span></code></pre></div></div>
<p>Invoke garbage collection on the server side. Optionally, specify the generation level for the collection. For more
information, see <a href="https://learn.microsoft.com/en-us/dotnet/api/system.gc.collect" target="_blank" rel="noopener noreferrer">this article</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply">Resp Reply<a href="#resp-reply" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Simple string reply: OK.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="commitaof">COMMITAOF<a href="#commitaof" class="hash-link" aria-label="Direct link to COMMITAOF" title="Direct link to COMMITAOF">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-1">Syntax<a href="#syntax-1" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    COMMITAOF [DBID]</span><br></span></code></pre></div></div>
<p>Issues a manual commit of the append-only-file (for all active databases in the Garnet instance). This is useful when auto-commits are turned off, but you need the system to commit at specific times. If a DB ID is specified, a manual commit of the append-only-file of that specific database will be issues.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-1">Resp Reply<a href="#resp-reply-1" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Simple string reply: OK.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hcollect">HCOLLECT<a href="#hcollect" class="hash-link" aria-label="Direct link to HCOLLECT" title="Direct link to HCOLLECT">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-2">Syntax<a href="#syntax-2" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    HCOLLECT key [key ...]</span><br></span></code></pre></div></div>
<p>Manualy trigger cleanup of expired field from memory for a given Hash set key.</p>
<p>Use <code>*</code> as the key to collect it from all hash keys.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-2">Resp Reply<a href="#resp-reply-2" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Simple reply: OK response
Error reply: ERR HCOLLECT scan already in progress</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zcollect">ZCOLLECT<a href="#zcollect" class="hash-link" aria-label="Direct link to ZCOLLECT" title="Direct link to ZCOLLECT">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-3">Syntax<a href="#syntax-3" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZCOLLECT key [key ...]</span><br></span></code></pre></div></div>
<p>Manualy trigger cleanup of expired member from memory for a given Hash set key.</p>
<p>Use <code>*</code> as the key to collect it from all sorted set keys.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-3">Resp Reply<a href="#resp-reply-3" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Simple reply: OK response
Error reply: ERR ZCOLLECT scan already in progress</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="coscan">COSCAN<a href="#coscan" class="hash-link" aria-label="Direct link to COSCAN" title="Direct link to COSCAN">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-4">Syntax<a href="#syntax-4" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    COSCAN key cursor [MATCH pattern] [COUNT count] [NOVALUES]</span><br></span></code></pre></div></div>
<p>Custom Object Scan is similar to <a href="/garnet/docs/commands/data-structures#hscan">HSCAN</a> and <a href="/garnet/docs/commands/data-structures#sscan">SSCAN</a>. It iterates
over the fields and values of a custom object stored at a given key.</p>
<p>The match parameter allows to apply a filter to elements after they have been retrieved from the collection.
The count option sets a limit to the maximum number of items returned from the server to this command. This limit
is also set in conjunction with the object-scan-count-limit of the global server settings.</p>
<p>You can use the NOVALUES option to make Garnet return only the keys without their corresponding values.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="secondaryof">SECONDARYOF<a href="#secondaryof" class="hash-link" aria-label="Direct link to SECONDARYOF" title="Direct link to SECONDARYOF">​</a></h3>
<p>Configures a server as secondary of another, or promotes it to a primary. Same as <a href="/garnet/docs/commands/server#replicaof">REPLICAOF</a>.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="registercs">REGISTERCS<a href="#registercs" class="hash-link" aria-label="Direct link to REGISTERCS" title="Direct link to REGISTERCS">​</a></h3>
<p>This allows registering specific custom commands and transactions implemented in C#, in a server side DLL library.
See <a href="/garnet/docs/dev/custom-commands">this page</a> for details.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="runtxp">RUNTXP<a href="#runtxp" class="hash-link" aria-label="Direct link to RUNTXP" title="Direct link to RUNTXP">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-5">Syntax<a href="#syntax-5" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    RUNTXP txid [args]</span><br></span></code></pre></div></div>
<p>Runs the specific custom transactional procedure indetified by its ID.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchms">WATCHMS<a href="#watchms" class="hash-link" aria-label="Direct link to WATCHMS" title="Direct link to WATCHMS">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-6">Syntax<a href="#syntax-6" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    WATCHMS key [key ...]</span><br></span></code></pre></div></div>
<p>Same as <a href="/garnet/docs/commands/transactions#watch">WATCH</a>, but specifies that the key is only present in the main (raw string) store.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="watchos">WATCHOS<a href="#watchos" class="hash-link" aria-label="Direct link to WATCHOS" title="Direct link to WATCHOS">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-7">Syntax<a href="#syntax-7" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    WATCHOS key [key ...]</span><br></span></code></pre></div></div>
<p>Same as <a href="/garnet/docs/commands/transactions#watch">WATCH</a>, but specifies that the key is only present in the object store.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="async">ASYNC<a href="#async" class="hash-link" aria-label="Direct link to ASYNC" title="Direct link to ASYNC">​</a></h3>
<p>Async interface to Garnet when accessing larger-than-memory data. See <a href="https://github.com/microsoft/garnet/pull/387" target="_blank" rel="noopener noreferrer">this link</a> for details.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-loadcs">MODULE LOADCS<a href="#module-loadcs" class="hash-link" aria-label="Direct link to MODULE LOADCS" title="Direct link to MODULE LOADCS">​</a></h3>
<p>This the equivalent of <code>MODULE LOAD</code> in the original RESP protocol. This loads a self-contained module in which the module
initialization code registers all relevant commands and transactions automatically. See <a href="/garnet/docs/dev/custom-commands">this page</a>
for details.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="native-etag-support">Native ETag Support<a href="#native-etag-support" class="hash-link" aria-label="Direct link to Native ETag Support" title="Direct link to Native ETag Support">​</a></h2>
<p>Garnet provides support for ETags on raw strings. By using the ETag-related commands outlined below, you can associate any <strong>string based key-value pair</strong> inserted into Garnet with an automatically updated ETag.</p>
<p>Compatibility with non-ETag commands and the behavior of data inserted with ETags are detailed at the end of this document.
To initialize a key value pair with an ETag you can use either the SET command with the newly added &quot;WITHETAG&quot; optional flag, or you can take any existing Key value pair and call SETIFMATCH with the ETag argument as 0 (Any key value pair without an explicit ETag has an ETag of 0 implicitly). Read more about Etag use cases and patterns <a href="/garnet/blog/etags-when-and-how">here</a></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-withetag"><strong>SET (WITHETAG)</strong><a href="#set-withetag" class="hash-link" aria-label="Direct link to set-withetag" title="Direct link to set-withetag">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-8"><strong>Syntax</strong><a href="#syntax-8" class="hash-link" aria-label="Direct link to syntax-8" title="Direct link to syntax-8">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    SET key value [NX | XX] [EX seconds | PX milliseconds] [KEEPTTL] WITHETAG</span><br></span></code></pre></div></div>
<p>Set <strong>key</strong> to hold the string value along with an ETag. If key already holds a value, it is overwritten, regardless of its type. Any previous time to live associated with the <strong>key</strong> is discarded on successful SET operation.</p>
<p><strong>Options:</strong></p>
<ul>
<li>EX seconds -- Set the specified expire time, in seconds (a positive integer).</li>
<li>PX milliseconds -- Set the specified expire time, in milliseconds (a positive integer).</li>
<li>NX -- Only set the key if it does not already exist.</li>
<li>XX -- Only set the key if it already exists.</li>
<li>KEEPTTL -- Retain the time to live associated with the key.</li>
<li>WITHETAG -- <strong>Adding this sets the Key Value pair with an initial ETag</strong>, if called on an existing key value pair with an ETag, this command will update the ETag transparently.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-4">Resp Reply<a href="#resp-reply-4" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<ul>
<li>Integer reply: WITHETAG given: The ETag associated with the value.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getwithetag"><strong>GETWITHETAG</strong><a href="#getwithetag" class="hash-link" aria-label="Direct link to getwithetag" title="Direct link to getwithetag">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-9"><strong>Syntax</strong><a href="#syntax-9" class="hash-link" aria-label="Direct link to syntax-9" title="Direct link to syntax-9">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GETWITHETAG key</span><br></span></code></pre></div></div>
<p>Retrieves the value and the ETag associated with the given key.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response"><strong>Response</strong><a href="#response" class="hash-link" aria-label="Direct link to response" title="Direct link to response">​</a></h4>
<p>One of the following:</p>
<ul>
<li><strong>Array reply</strong>: An array of two items returned on success. The first item is an integer representing the ETag, and the second is the bulk string value of the key. If called on a key-value pair without ETag, the etag will be 0.</li>
<li><strong>Nil reply</strong>: If the key does not exist.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setifmatch"><strong>SETIFMATCH</strong><a href="#setifmatch" class="hash-link" aria-label="Direct link to setifmatch" title="Direct link to setifmatch">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-10"><strong>Syntax</strong><a href="#syntax-10" class="hash-link" aria-label="Direct link to syntax-10" title="Direct link to syntax-10">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SETIFMATCH key value etag [EX seconds | PX milliseconds] [NOGET]</span><br></span></code></pre></div></div>
<p>Sets/updates a key value pair with the given etag only if (1) the etag given in the request matches the already existing etag ; or (2) there was no existing value; or (3) the existing value was not associated with any etag and the sent etag was 0.</p>
<p><strong>Options:</strong></p>
<ul>
<li>EX seconds -- Set the specified expire time, in seconds (a positive integer).</li>
<li>PX milliseconds -- Set the specified expire time, in milliseconds (a positive integer).</li>
<li>NOGET -- The value is not returned even if the etag mismatched</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response-1"><strong>Response</strong><a href="#response-1" class="hash-link" aria-label="Direct link to response-1" title="Direct link to response-1">​</a></h4>
<ul>
<li><strong>Array reply</strong>: If the sent etag matches the existing etag the reponse will be an array where the first item is the updated etag, and the second value is nil. If the etags do not match then the response array will hold the latest etag, and the latest value in order.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setifgreater"><strong>SETIFGREATER</strong><a href="#setifgreater" class="hash-link" aria-label="Direct link to setifgreater" title="Direct link to setifgreater">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-11"><strong>Syntax</strong><a href="#syntax-11" class="hash-link" aria-label="Direct link to syntax-11" title="Direct link to syntax-11">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SETIFGREATER key value etag [EX seconds | PX milliseconds] [NOGET]</span><br></span></code></pre></div></div>
<p>Sets/updates a key value pair with the given etag only if (1) the etag given in the request is greater than the already existing etag ; or (2) there was no existing value; or (3) the existing value was not associated with any etag and the sent etag was greater than 0.</p>
<p><strong>Options:</strong></p>
<ul>
<li>EX seconds -- Set the specified expire time, in seconds (a positive integer).</li>
<li>PX milliseconds -- Set the specified expire time, in milliseconds (a positive integer).</li>
<li>NOGET -- The value is not returned even if the sent etag was not greater to existing etag.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response-2"><strong>Response</strong><a href="#response-2" class="hash-link" aria-label="Direct link to response-2" title="Direct link to response-2">​</a></h4>
<ul>
<li><strong>Array reply</strong>: If the sent etag is greater than the existing etag then an array where the first item is the updated etag, and the second value is nil is returned. If the sentEtag is less than or equal to the existing etag then the response array will hold the latest etag, and the latest value in order.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="getifnotmatch"><strong>GETIFNOTMATCH</strong><a href="#getifnotmatch" class="hash-link" aria-label="Direct link to getifnotmatch" title="Direct link to getifnotmatch">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-12"><strong>Syntax</strong><a href="#syntax-12" class="hash-link" aria-label="Direct link to syntax-12" title="Direct link to syntax-12">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GETIFNOTMATCH key etag</span><br></span></code></pre></div></div>
<p>Retrieves the value if the ETag associated with the key has changed; otherwise, returns a response indicating no change.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response-3"><strong>Response</strong><a href="#response-3" class="hash-link" aria-label="Direct link to response-3" title="Direct link to response-3">​</a></h4>
<p>One of the following:</p>
<ul>
<li><strong>Array reply</strong>: If the ETag does not match, an array of two items is returned. The first item is the latest ETag, and the second item is the value associated with the key. If the Etag matches  the first item in the response array is the etag and the second item is nil.</li>
<li><strong>Nil reply</strong>: If the key does not exist.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delifgreater"><strong>DELIFGREATER</strong><a href="#delifgreater" class="hash-link" aria-label="Direct link to delifgreater" title="Direct link to delifgreater">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-13"><strong>Syntax</strong><a href="#syntax-13" class="hash-link" aria-label="Direct link to syntax-13" title="Direct link to syntax-13">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DELIFGREATER key etag</span><br></span></code></pre></div></div>
<p>Deletes a key only if the provided Etag is strictly greater than the existing Etag for the key.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response-4"><strong>Response</strong><a href="#response-4" class="hash-link" aria-label="Direct link to response-4" title="Direct link to response-4">​</a></h4>
<ul>
<li><strong>Integer reply</strong>: Returns 1 if the key was successfully deleted; otherwise, returns 0.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-and-behavior-with-non-etag-commands">Compatibility and Behavior with Non-ETag Commands<a href="#compatibility-and-behavior-with-non-etag-commands" class="hash-link" aria-label="Direct link to Compatibility and Behavior with Non-ETag Commands" title="Direct link to Compatibility and Behavior with Non-ETag Commands">​</a></h3>
<p>ETags are currently not supported for servers running in Cluster mode. This will be supported soon.</p>
<p>Below is the expected behavior of ETag-associated key-value pairs when non-ETag commands are used.</p>
<ul>
<li>
<p><strong>MSET, BITOP</strong>: These commands will replace an existing ETag-associated key-value pair with a non-ETag key-value pair, effectively removing the ETag.</p>
</li>
<li>
<p><strong>SET</strong>: Only if used with additional option &quot;WITHETAG&quot; will calling SET update the etag while inserting the new key-value pair over the existing key-value pair.</p>
</li>
<li>
<p><strong>RENAME</strong>: RENAME takes an option for WITHETAG. When called WITHETAG it will rename the key with an etag if the key being renamed to did not exist, else it will increment the existing etag of the key being renamed to.</p>
</li>
<li>
<p><strong>Custom Commands</strong>: While etag based key value pairs <strong>can be used blindly inside of custom transactions and custom procedures</strong>, ETag set key value pairs are <strong>not supported to be used from inside of Custom Raw String Functions.</strong></p>
</li>
</ul>
<p>All other commands will update the etag internally if they modify the underlying data, and any responses from them will not expose the etag to the client. To the users the etag and it&#x27;s updates remain hidden in non-etag commands.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zexpire">ZEXPIRE<a href="#zexpire" class="hash-link" aria-label="Direct link to ZEXPIRE" title="Direct link to ZEXPIRE">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-14">Syntax<a href="#syntax-14" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZEXPIRE key seconds [NX | XX | GT | LT] MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Sets a timeout on one or more members of a sorted set key. After the timeout has expired, the members will automatically be deleted. The timeout is specified in seconds.</p>
<p>The command supports several options to control when the expiration should be set:</p>
<ul>
<li><strong>NX:</strong> Only set expiry on members that have no existing expiry</li>
<li><strong>XX:</strong> Only set expiry on members that already have an expiry set</li>
<li><strong>GT:</strong> Only set expiry when it&#x27;s greater than the current expiry</li>
<li><strong>LT:</strong> Only set expiry when it&#x27;s less than the current expiry</li>
</ul>
<p>The <strong>NX</strong>, <strong>XX</strong>, <strong>GT</strong>, and <strong>LT</strong> options are mutually exclusive.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-5">Resp Reply<a href="#resp-reply-5" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>1 if the timeout was set</li>
<li>0 if the member doesn&#x27;t exist</li>
<li>-1 if timeout was not set due to condition not being met</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zexpireat">ZEXPIREAT<a href="#zexpireat" class="hash-link" aria-label="Direct link to ZEXPIREAT" title="Direct link to ZEXPIREAT">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-15">Syntax<a href="#syntax-15" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZEXPIREAT key unix-time-seconds [NX | XX | GT | LT] MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Sets an absolute expiration time (Unix timestamp in seconds) for one or more sorted set members. After the timestamp has passed, the members will automatically be deleted.</p>
<p>The command supports several options to control when the expiration should be set:</p>
<ul>
<li><strong>NX:</strong> Only set expiry on members that have no existing expiry</li>
<li><strong>XX:</strong> Only set expiry on members that already have an expiry set</li>
<li><strong>GT:</strong> Only set expiry when it&#x27;s greater than the current expiry</li>
<li><strong>LT:</strong> Only set expiry when it&#x27;s less than the current expiry</li>
</ul>
<p>The <strong>NX</strong>, <strong>XX</strong>, <strong>GT</strong>, and <strong>LT</strong> options are mutually exclusive.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-6">Resp Reply<a href="#resp-reply-6" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>1 if the timeout was set</li>
<li>0 if the member doesn&#x27;t exist</li>
<li>-1 if timeout was not set due to condition not being met</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zpexpire">ZPEXPIRE<a href="#zpexpire" class="hash-link" aria-label="Direct link to ZPEXPIRE" title="Direct link to ZPEXPIRE">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-16">Syntax<a href="#syntax-16" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZPEXPIRE key milliseconds [NX | XX | GT | LT] MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Similar to HEXPIRE but the timeout is specified in milliseconds instead of seconds.</p>
<p>The command supports several options to control when the expiration should be set:</p>
<ul>
<li><strong>NX:</strong> Only set expiry on members that have no existing expiry</li>
<li><strong>XX:</strong> Only set expiry on members that already have an expiry set</li>
<li><strong>GT:</strong> Only set expiry when it&#x27;s greater than the current expiry</li>
<li><strong>LT:</strong> Only set expiry when it&#x27;s less than the current expiry</li>
</ul>
<p>The <strong>NX</strong>, <strong>XX</strong>, <strong>GT</strong>, and <strong>LT</strong> options are mutually exclusive.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-7">Resp Reply<a href="#resp-reply-7" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>1 if the timeout was set</li>
<li>0 if the member doesn&#x27;t exist</li>
<li>-1 if timeout was not set due to condition not being met</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zpexpireat">ZPEXPIREAT<a href="#zpexpireat" class="hash-link" aria-label="Direct link to ZPEXPIREAT" title="Direct link to ZPEXPIREAT">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-17">Syntax<a href="#syntax-17" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZPEXPIREAT key unix-time-milliseconds [NX | XX | GT | LT] MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Similar to HEXPIREAT but uses Unix timestamp in milliseconds instead of seconds.</p>
<p>The command supports several options to control when the expiration should be set:</p>
<ul>
<li><strong>NX:</strong> Only set expiry on members that have no existing expiry</li>
<li><strong>XX:</strong> Only set expiry on members that already have an expiry set</li>
<li><strong>GT:</strong> Only set expiry when it&#x27;s greater than the current expiry</li>
<li><strong>LT:</strong> Only set expiry when it&#x27;s less than the current expiry</li>
</ul>
<p>The <strong>NX</strong>, <strong>XX</strong>, <strong>GT</strong>, and <strong>LT</strong> options are mutually exclusive.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-8">Resp Reply<a href="#resp-reply-8" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>1 if the timeout was set</li>
<li>0 if the member doesn&#x27;t exist</li>
<li>-1 if timeout was not set due to condition not being met</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zttl">ZTTL<a href="#zttl" class="hash-link" aria-label="Direct link to ZTTL" title="Direct link to ZTTL">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-18">Syntax<a href="#syntax-18" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZTTL key MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Returns the remaining time to live in seconds for one or more sorted set members that have a timeout set.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-9">Resp Reply<a href="#resp-reply-9" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>TTL in seconds if the member exists and has an expiry set</li>
<li>-1 if the member exists but has no expiry set</li>
<li>-2 if the member does not exist</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zpttl">ZPTTL<a href="#zpttl" class="hash-link" aria-label="Direct link to ZPTTL" title="Direct link to ZPTTL">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-19">Syntax<a href="#syntax-19" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZPTTL key MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Similar to HTTL but returns the remaining time to live in milliseconds instead of seconds.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-10">Resp Reply<a href="#resp-reply-10" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>TTL in milliseconds if the member exists and has an expiry set</li>
<li>-1 if the member exists but has no expiry set</li>
<li>-2 if the member does not exist</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zexpiretime">ZEXPIRETIME<a href="#zexpiretime" class="hash-link" aria-label="Direct link to ZEXPIRETIME" title="Direct link to ZEXPIRETIME">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-20">Syntax<a href="#syntax-20" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZEXPIRETIME key MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Returns the absolute Unix timestamp (in seconds) at which the specified sorted set members will expire.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-11">Resp Reply<a href="#resp-reply-11" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>Unix timestamp in seconds when the member will expire</li>
<li>-1 if the member exists but has no expiry set</li>
<li>-2 if the member does not exist</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zpexpiretime">ZPEXPIRETIME<a href="#zpexpiretime" class="hash-link" aria-label="Direct link to ZPEXPIRETIME" title="Direct link to ZPEXPIRETIME">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-21">Syntax<a href="#syntax-21" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZPEXPIRETIME key MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Similar to HEXPIRETIME but returns the expiry timestamp in milliseconds instead of seconds.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-12">Resp Reply<a href="#resp-reply-12" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>Unix timestamp in milliseconds when the member will expire</li>
<li>-1 if the member exists but has no expiry set</li>
<li>-2 if the member does not exist</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zpersist">ZPERSIST<a href="#zpersist" class="hash-link" aria-label="Direct link to ZPERSIST" title="Direct link to ZPERSIST">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-22">Syntax<a href="#syntax-22" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZPERSIST key MEMBERS nummembers member [member ...]</span><br></span></code></pre></div></div>
<p>Removes the expiration from the specified sorted set members, making them persistent.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-13">Resp Reply<a href="#resp-reply-13" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Array reply: For each member, returns:</p>
<ul>
<li>1 if the timeout was removed</li>
<li>0 if the member exists but has no timeout</li>
<li>-1 if the member does not exist</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zcollect-1">ZCOLLECT<a href="#zcollect-1" class="hash-link" aria-label="Direct link to ZCOLLECT" title="Direct link to ZCOLLECT">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="syntax-23">Syntax<a href="#syntax-23" class="hash-link" aria-label="Direct link to Syntax" title="Direct link to Syntax">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ZCOLLECT key [key ...]</span><br></span></code></pre></div></div>
<p>Manualy trigger cleanup of expired member from memory for a given Hash set key.</p>
<p>Use <code>*</code> as the key to collect it from all sorted set keys.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resp-reply-14">Resp Reply<a href="#resp-reply-14" class="hash-link" aria-label="Direct link to Resp Reply" title="Direct link to Resp Reply">​</a></h4>
<p>Simple reply: OK response
Error reply: ERR ZCOLLECT scan already in progress</p>
<hr></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/garnet/tree/main/website/docs/commands/garnet-specific.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/garnet/docs/commands/scripting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Scripting and functions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/garnet/docs/commands/json"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">JSON Module</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#forcegc" class="table-of-contents__link toc-highlight">FORCEGC</a></li><li><a href="#commitaof" class="table-of-contents__link toc-highlight">COMMITAOF</a></li><li><a href="#hcollect" class="table-of-contents__link toc-highlight">HCOLLECT</a></li><li><a href="#zcollect" class="table-of-contents__link toc-highlight">ZCOLLECT</a></li><li><a href="#coscan" class="table-of-contents__link toc-highlight">COSCAN</a></li><li><a href="#secondaryof" class="table-of-contents__link toc-highlight">SECONDARYOF</a></li><li><a href="#registercs" class="table-of-contents__link toc-highlight">REGISTERCS</a></li><li><a href="#runtxp" class="table-of-contents__link toc-highlight">RUNTXP</a></li><li><a href="#watchms" class="table-of-contents__link toc-highlight">WATCHMS</a></li><li><a href="#watchos" class="table-of-contents__link toc-highlight">WATCHOS</a></li><li><a href="#async" class="table-of-contents__link toc-highlight">ASYNC</a></li><li><a href="#module-loadcs" class="table-of-contents__link toc-highlight">MODULE LOADCS</a></li><li><a href="#native-etag-support" class="table-of-contents__link toc-highlight">Native ETag Support</a><ul><li><a href="#set-withetag" class="table-of-contents__link toc-highlight"><strong>SET (WITHETAG)</strong></a></li><li><a href="#getwithetag" class="table-of-contents__link toc-highlight"><strong>GETWITHETAG</strong></a></li><li><a href="#setifmatch" class="table-of-contents__link toc-highlight"><strong>SETIFMATCH</strong></a></li><li><a href="#setifgreater" class="table-of-contents__link toc-highlight"><strong>SETIFGREATER</strong></a></li><li><a href="#getifnotmatch" class="table-of-contents__link toc-highlight"><strong>GETIFNOTMATCH</strong></a></li><li><a href="#delifgreater" class="table-of-contents__link toc-highlight"><strong>DELIFGREATER</strong></a></li><li><a href="#compatibility-and-behavior-with-non-etag-commands" class="table-of-contents__link toc-highlight">Compatibility and Behavior with Non-ETag Commands</a></li><li><a href="#zexpire" class="table-of-contents__link toc-highlight">ZEXPIRE</a></li><li><a href="#zexpireat" class="table-of-contents__link toc-highlight">ZEXPIREAT</a></li><li><a href="#zpexpire" class="table-of-contents__link toc-highlight">ZPEXPIRE</a></li><li><a href="#zpexpireat" class="table-of-contents__link toc-highlight">ZPEXPIREAT</a></li><li><a href="#zttl" class="table-of-contents__link toc-highlight">ZTTL</a></li><li><a href="#zpttl" class="table-of-contents__link toc-highlight">ZPTTL</a></li><li><a href="#zexpiretime" class="table-of-contents__link toc-highlight">ZEXPIRETIME</a></li><li><a href="#zpexpiretime" class="table-of-contents__link toc-highlight">ZPEXPIRETIME</a></li><li><a href="#zpersist" class="table-of-contents__link toc-highlight">ZPERSIST</a></li><li><a href="#zcollect-1" class="table-of-contents__link toc-highlight">ZCOLLECT</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/docs/getting-started">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aka.ms/garnet-discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/msrgarnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/garnet/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/garnet" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p class="text-center">
          <a href="https://go.microsoft.com/fwlink/?LinkId=521839" style="color: white;">Privacy &amp; Cookies</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=2259814" style="color: white;">Consumer Health Privacy</a> |
          <a href="https://go.microsoft.com/fwlink/?LinkID=206977" style="color: white;">Terms of Use</a> |
          <a href="https://www.microsoft.com/trademarks" style="color: white;">Trademarks</a> | © 2025
          </p></div></div></div></footer></div>
</body>
</html>